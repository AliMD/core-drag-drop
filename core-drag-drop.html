<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">

<style>
  core-drag-avatar {
    position: fixed;
    left: 100px;
    top: 100px;
    display: block;
    width: 40px;
    height: 40px;
    border: 3px solid orange;
  }
</style>

<!--
@group Polymer Core Elements
@element core-drag-drop
@homepage github.io
-->

<polymer-element name="core-drag-drop">
<script>

  Polymer('core-drag-drop', {

    ready: function() {
      this.avatar = document.createElement('core-drag-avatar');
      document.body.appendChild(this.avatar);
      this.showAvatar = false;
    },

    showAvatarChanged: function() {
      this.avatar.style.display = this.showAvatar ? '' : 'none';
    },

    xChanged: function() {
      this.avatar.style.left = this.x + 'px';
    },

    yChanged: function() {
      this.avatar.style.top = this.y + 'px';
    },

    attached: function() {
      var listen = function(event, handler) {
        this.parentNode.addEventListener(event, this[handler].bind(this));
      }.bind(this);
      listen('trackstart', 'trackStart');
      listen('track', 'track');
      listen('trackend', 'trackEnd');
      this.parentNode.setAttribute('touch-action', 'none');
    },

    trackStart: function(event) {
      this.showAvatar = true;
    },

    track: function(event) {
      this.x = event.pageX;
      this.y = event.pageY;
    },

    trackEnd: function() {
      this.showAvatar = false;
    }

  });

</script>
</polymer-element>
